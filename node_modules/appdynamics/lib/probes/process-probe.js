/*
Copyright (c) AppDynamics, Inc., and its affiliates
2015
All Rights Reserved
*/
'use strict';


function ProcessProbe(agent) {
  this.agent = agent;
}
exports.ProcessProbe = ProcessProbe;



ProcessProbe.prototype.attach = function(obj) {
  var proxy = this.agent.proxy;
  var thread = this.agent.thread;

  // we need nextThick for thread simulation
  proxy.before(obj, ['nextTick'], function(obj, args) {
    var threadId = thread.current();
    proxy.callback(args, -1, function(obj, args) {
      thread.resume(threadId);
    });
  });
};
